<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>core_arena: Configuration functions.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">core_arena<span id="projectnumber">&#160;859f7ea</span>
   </div>
   <div id="projectbrief">An arena allocater that uses core memory aside malloc.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Configuration functions.<div class="ingroups"><a class="el" href="a00017.html">User functions</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Functions for setting up and tearing down the arenas.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Configuration functions.:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="a00018.svg" width="359" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga2299867db75ae79b287efc786896a9d9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#ga2299867db75ae79b287efc786896a9d9">CHECK_MEM_AVAIL</a>(mem_need,  mem_object)</td></tr>
<tr class="separator:ga2299867db75ae79b287efc786896a9d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4803d2838f1455d7dd2973b3cb4885c7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#ga4803d2838f1455d7dd2973b3cb4885c7">_arena_teardown</a> (void)</td></tr>
<tr class="separator:ga4803d2838f1455d7dd2973b3cb4885c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac325156a050d7efefe354ec2a88fcab3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#gac325156a050d7efefe354ec2a88fcab3">arena_init_arenas</a> (size_t count)</td></tr>
<tr class="memdesc:gac325156a050d7efefe354ec2a88fcab3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the number of arenas.  <a href="a00018.html#gac325156a050d7efefe354ec2a88fcab3">More...</a><br /></td></tr>
<tr class="separator:gac325156a050d7efefe354ec2a88fcab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gae1ce763e170ef4f371f9ae5fd34ce4c2"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00018.html#gae1ce763e170ef4f371f9ae5fd34ce4c2">arenas_initialized</a> =false</td></tr>
<tr class="separator:gae1ce763e170ef4f371f9ae5fd34ce4c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >Functions for setting up and tearing down the arenas. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga2299867db75ae79b287efc786896a9d9" name="ga2299867db75ae79b287efc786896a9d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2299867db75ae79b287efc786896a9d9">&#9670;&nbsp;</a></span>CHECK_MEM_AVAIL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHECK_MEM_AVAIL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">mem_need, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">mem_object&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <span class="keywordflow">do</span> {\</div>
<div class="line">    if (<a class="code hl_variable" href="a00015.html#ga1df927675e1c3b3474a43682105fe225">tot_mem_usage</a> &gt; <a class="code hl_variable" href="a00008.html#a8947d7bceb80934a62e9b068cdc31590">ARENAS_MAX_ALLOC</a> - mem_need ) {\</div>
<div class="line">        _logmsg_write(emsg2,#mem_object);\</div>
<div class="line">        exit(EXIT_FAILURE);\</div>
<div class="line">    }\</div>
<div class="line">} <span class="keywordflow">while</span> (0)</div>
<div class="ttc" id="aa00008_html_a8947d7bceb80934a62e9b068cdc31590"><div class="ttname"><a href="a00008.html#a8947d7bceb80934a62e9b068cdc31590">ARENAS_MAX_ALLOC</a></div><div class="ttdeci">size_t ARENAS_MAX_ALLOC</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00183">core_arena.c:183</a></div></div>
<div class="ttc" id="aa00015_html_ga1df927675e1c3b3474a43682105fe225"><div class="ttname"><a href="a00015.html#ga1df927675e1c3b3474a43682105fe225">tot_mem_usage</a></div><div class="ttdeci">static size_t tot_mem_usage</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00279">core_arena.c:279</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="a00008_source.html#l00670">670</a> of file <a class="el" href="a00008_source.html">core_arena.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga4803d2838f1455d7dd2973b3cb4885c7" name="ga4803d2838f1455d7dd2973b3cb4885c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4803d2838f1455d7dd2973b3cb4885c7">&#9670;&nbsp;</a></span>_arena_teardown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void _arena_teardown </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00008_source.html#l00645">645</a> of file <a class="el" href="a00008_source.html">core_arena.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  646</span>{</div>
<div class="line"><span class="lineno">  647</span>    free(<a class="code hl_variable" href="a00012.html#ga78a93982f8ff9e5611e5a7cd5358864f">first</a>);</div>
<div class="line"><span class="lineno">  648</span>    free(<a class="code hl_variable" href="a00012.html#gad22309eea01f316e361e4cdbb0b6a964">arenas</a>);</div>
<div class="line"><span class="lineno">  649</span><span class="preprocessor">#ifndef CORE_ARENA_NO_LOGGING</span></div>
<div class="line"><span class="lineno">  650</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="a00015.html#gab1eaae997e785328330ae4bbf7cf3d0f">core_arena_log_level</a> &gt;= <a class="code hl_define" href="a00015.html#ga55710d867b81d742af6057b89017ba7b">LOG_CHUNK_MALLOCS</a>  ) {</div>
<div class="line"><span class="lineno">  651</span>        free(<a class="code hl_variable" href="a00015.html#ga7f0e6ee371f41cbb641b2a74ffcc799e">arenas_mem_malloced</a>);</div>
<div class="line"><span class="lineno">  652</span>        free(<a class="code hl_variable" href="a00015.html#ga43a17f892ca9f175f4534e44ebc76fc1">arenas_mem_malloced_count</a> );</div>
<div class="line"><span class="lineno">  653</span>        free(<a class="code hl_variable" href="a00015.html#ga28ecc87bc4223b8f9c40e9bd2cf7ed32">arenas_mem_mmapped</a> );</div>
<div class="line"><span class="lineno">  654</span>        free(<a class="code hl_variable" href="a00015.html#ga39626941a835902709e5be48ab078b87">arenas_mem_mmapped_count</a> );</div>
<div class="line"><span class="lineno">  655</span>        free(<a class="code hl_variable" href="a00015.html#ga9fd032f6aaa6a58f211f912303012499">arenas_max_chunk_size</a> );</div>
<div class="line"><span class="lineno">  656</span> </div>
<div class="line"><span class="lineno">  657</span>    }</div>
<div class="line"><span class="lineno">  658</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="a00015.html#gab1eaae997e785328330ae4bbf7cf3d0f">core_arena_log_level</a> &gt;= <a class="code hl_define" href="a00015.html#ga1916d6f5e5c7448b09095b19899b482c">FULL_ARENA_LOGGING</a>  ) {</div>
<div class="line"><span class="lineno">  659</span>        free(<a class="code hl_variable" href="a00015.html#ga49ca11b978773e49b190c6f977122988">arenas_mem_served</a> );</div>
<div class="line"><span class="lineno">  660</span>        free(<a class="code hl_variable" href="a00015.html#ga5acb1eb15a723f350bda9bb29734b186">arenas_mem_served_count</a>);</div>
<div class="line"><span class="lineno">  661</span>        free(<a class="code hl_variable" href="a00015.html#gad9e78bad28be8f331191b4603736f033">arenas_max_mem_request</a>);</div>
<div class="line"><span class="lineno">  662</span>        free(<a class="code hl_variable" href="a00015.html#ga217368e99341605e4ee440c4c7793204">arenas_min_mem_request</a>);</div>
<div class="line"><span class="lineno">  663</span>        free(<a class="code hl_variable" href="a00015.html#ga93bdbec87512dff3ba3a0c59de956149">arenas_avg_mem_request</a>);</div>
<div class="line"><span class="lineno">  664</span>    }</div>
<div class="line"><span class="lineno">  665</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  666</span>}</div>
<div class="ttc" id="aa00012_html_ga78a93982f8ff9e5611e5a7cd5358864f"><div class="ttname"><a href="a00012.html#ga78a93982f8ff9e5611e5a7cd5358864f">first</a></div><div class="ttdeci">static Arena * first</div><div class="ttdoc">A head pointer to the first arena.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00048">core_arena.c:48</a></div></div>
<div class="ttc" id="aa00012_html_gad22309eea01f316e361e4cdbb0b6a964"><div class="ttname"><a href="a00012.html#gad22309eea01f316e361e4cdbb0b6a964">arenas</a></div><div class="ttdeci">static Arena ** arenas</div><div class="ttdoc">Backing Array for accessing and using arenas.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00049">core_arena.c:49</a></div></div>
<div class="ttc" id="aa00015_html_ga1916d6f5e5c7448b09095b19899b482c"><div class="ttname"><a href="a00015.html#ga1916d6f5e5c7448b09095b19899b482c">FULL_ARENA_LOGGING</a></div><div class="ttdeci">#define FULL_ARENA_LOGGING</div><div class="ttdoc">Constant for logging bothh allocations of memory for the arenas, and the allocations.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00261">core_arena.c:259</a></div></div>
<div class="ttc" id="aa00015_html_ga217368e99341605e4ee440c4c7793204"><div class="ttname"><a href="a00015.html#ga217368e99341605e4ee440c4c7793204">arenas_min_mem_request</a></div><div class="ttdeci">static size_t * arenas_min_mem_request</div><div class="ttdoc">‍For logging largest memory request for each arena.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00290">core_arena.c:290</a></div></div>
<div class="ttc" id="aa00015_html_ga28ecc87bc4223b8f9c40e9bd2cf7ed32"><div class="ttname"><a href="a00015.html#ga28ecc87bc4223b8f9c40e9bd2cf7ed32">arenas_mem_mmapped</a></div><div class="ttdeci">static size_t * arenas_mem_mmapped</div><div class="ttdoc">&gt;Number of allocations of ram per arenas.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00282">core_arena.c:282</a></div></div>
<div class="ttc" id="aa00015_html_ga39626941a835902709e5be48ab078b87"><div class="ttname"><a href="a00015.html#ga39626941a835902709e5be48ab078b87">arenas_mem_mmapped_count</a></div><div class="ttdeci">static size_t * arenas_mem_mmapped_count</div><div class="ttdoc">&gt;Amount of ram mmapped per arena (&gt;128K).</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00283">core_arena.c:283</a></div></div>
<div class="ttc" id="aa00015_html_ga43a17f892ca9f175f4534e44ebc76fc1"><div class="ttname"><a href="a00015.html#ga43a17f892ca9f175f4534e44ebc76fc1">arenas_mem_malloced_count</a></div><div class="ttdeci">static size_t * arenas_mem_malloced_count</div><div class="ttdoc">&gt;Amount of ram allocated per arena.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00281">core_arena.c:281</a></div></div>
<div class="ttc" id="aa00015_html_ga49ca11b978773e49b190c6f977122988"><div class="ttname"><a href="a00015.html#ga49ca11b978773e49b190c6f977122988">arenas_mem_served</a></div><div class="ttdeci">static size_t * arenas_mem_served</div><div class="ttdoc">&gt;Number of mmapped ram per arena.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00284">core_arena.c:284</a></div></div>
<div class="ttc" id="aa00015_html_ga55710d867b81d742af6057b89017ba7b"><div class="ttname"><a href="a00015.html#ga55710d867b81d742af6057b89017ba7b">LOG_CHUNK_MALLOCS</a></div><div class="ttdeci">#define LOG_CHUNK_MALLOCS</div><div class="ttdoc">Constant for logging allocations of memory for the arenas.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00258">core_arena.c:258</a></div></div>
<div class="ttc" id="aa00015_html_ga5acb1eb15a723f350bda9bb29734b186"><div class="ttname"><a href="a00015.html#ga5acb1eb15a723f350bda9bb29734b186">arenas_mem_served_count</a></div><div class="ttdeci">static size_t * arenas_mem_served_count</div><div class="ttdoc">&gt;Amount of ram served through arena_alloc/calloc</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00285">core_arena.c:285</a></div></div>
<div class="ttc" id="aa00015_html_ga7f0e6ee371f41cbb641b2a74ffcc799e"><div class="ttname"><a href="a00015.html#ga7f0e6ee371f41cbb641b2a74ffcc799e">arenas_mem_malloced</a></div><div class="ttdeci">static size_t * arenas_mem_malloced</div><div class="ttdoc">&gt;Total usage in bytes.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00280">core_arena.c:280</a></div></div>
<div class="ttc" id="aa00015_html_ga93bdbec87512dff3ba3a0c59de956149"><div class="ttname"><a href="a00015.html#ga93bdbec87512dff3ba3a0c59de956149">arenas_avg_mem_request</a></div><div class="ttdeci">static size_t * arenas_avg_mem_request</div><div class="ttdoc">‍For logging smallest memory request for each arena.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00291">core_arena.c:291</a></div></div>
<div class="ttc" id="aa00015_html_ga9fd032f6aaa6a58f211f912303012499"><div class="ttname"><a href="a00015.html#ga9fd032f6aaa6a58f211f912303012499">arenas_max_chunk_size</a></div><div class="ttdeci">static size_t * arenas_max_chunk_size</div><div class="ttdoc">&gt;Number of servings of ram per arena.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00287">core_arena.c:287</a></div></div>
<div class="ttc" id="aa00015_html_gab1eaae997e785328330ae4bbf7cf3d0f"><div class="ttname"><a href="a00015.html#gab1eaae997e785328330ae4bbf7cf3d0f">core_arena_log_level</a></div><div class="ttdeci">int16_t core_arena_log_level</div><div class="ttdoc">Defines our current log level, if compiled in.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00262">core_arena.c:262</a></div></div>
<div class="ttc" id="aa00015_html_gad9e78bad28be8f331191b4603736f033"><div class="ttname"><a href="a00015.html#gad9e78bad28be8f331191b4603736f033">arenas_max_mem_request</a></div><div class="ttdeci">static size_t * arenas_max_mem_request</div><div class="ttdoc">‍For logging max chunk size for each arena.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00289">core_arena.c:289</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="a00008_source.html#l00049">arenas</a>, <a class="el" href="a00008_source.html#l00291">arenas_avg_mem_request</a>, <a class="el" href="a00008_source.html#l00287">arenas_max_chunk_size</a>, <a class="el" href="a00008_source.html#l00289">arenas_max_mem_request</a>, <a class="el" href="a00008_source.html#l00280">arenas_mem_malloced</a>, <a class="el" href="a00008_source.html#l00281">arenas_mem_malloced_count</a>, <a class="el" href="a00008_source.html#l00282">arenas_mem_mmapped</a>, <a class="el" href="a00008_source.html#l00283">arenas_mem_mmapped_count</a>, <a class="el" href="a00008_source.html#l00284">arenas_mem_served</a>, <a class="el" href="a00008_source.html#l00285">arenas_mem_served_count</a>, <a class="el" href="a00008_source.html#l00290">arenas_min_mem_request</a>, <a class="el" href="a00008_source.html#l00262">core_arena_log_level</a>, <a class="el" href="a00008_source.html#l00048">first</a>, <a class="el" href="a00008_source.html#l00259">FULL_ARENA_LOGGING</a>, and <a class="el" href="a00008_source.html#l00258">LOG_CHUNK_MALLOCS</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00008_source.html#l00689">arena_init_arenas()</a>.</p>

</div>
</div>
<a id="gac325156a050d7efefe354ec2a88fcab3" name="gac325156a050d7efefe354ec2a88fcab3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac325156a050d7efefe354ec2a88fcab3">&#9670;&nbsp;</a></span>arena_init_arenas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void arena_init_arenas </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the number of arenas. </p>
<p >Sets a static variable, to show we are initiated. creates arrays fit for the number of arenas installs an exit handler to take down the arenas on exit. Determines logging options if logging is compiled in. Gets the amount of <code>phys_avail</code> memory. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">count</td><td>1 larger than the last arena, starting at zero. </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="a00011.html#_todo000007">Todo:</a></b></dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="a00008_source.html#l00689">689</a> of file <a class="el" href="a00008_source.html">core_arena.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  690</span>{</div>
<div class="line"><span class="lineno">  691</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *emsg = <span class="stringliteral">&quot;arena_init_arenas: Calloc couldn&#39;t allocate memory for %s array.&quot;</span> ;</div>
<div class="line"><span class="lineno">  692</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *emsg2 =<span class="stringliteral">&quot;arena_init_arenas: Out of memory not enough free memory to allocates for %s.\n&quot;</span>;</div>
<div class="line"><span class="lineno">  693</span>    <span class="keywordtype">size_t</span> memory_consumption;</div>
<div class="line"><span class="lineno">  694</span> </div>
<div class="line"><span class="lineno">  695</span>    assert( count &gt; 0 ) ;</div>
<div class="line"><span class="lineno">  696</span>    <a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a> = count ;</div>
<div class="line"><span class="lineno">  697</span> </div>
<div class="line"><span class="lineno">  698</span>    <a class="code hl_variable" href="a00008.html#a8947d7bceb80934a62e9b068cdc31590">ARENAS_MAX_ALLOC</a> = <a class="code hl_function" href="a00008.html#a74373ca3f02daec67e250b363a71bdf1">ram_avail</a>() ;</div>
<div class="line"><span class="lineno">  699</span> </div>
<div class="line"><span class="lineno">  700</span>    memory_consumption = <a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a> * <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="a00012.html#gaa3c04ba804275765a4e49c9872d46a25">Arena</a>) ;</div>
<div class="line"><span class="lineno">  701</span>    <a class="code hl_define" href="a00018.html#ga2299867db75ae79b287efc786896a9d9">CHECK_MEM_AVAIL</a>(memory_consumption,<a class="code hl_variable" href="a00012.html#ga78a93982f8ff9e5611e5a7cd5358864f">first</a>);</div>
<div class="line"><span class="lineno">  702</span>    <a class="code hl_variable" href="a00012.html#ga78a93982f8ff9e5611e5a7cd5358864f">first</a> = calloc(<a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a>, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="a00024.html">Arena</a>)) ;</div>
<div class="line"><span class="lineno">  703</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="a00012.html#ga78a93982f8ff9e5611e5a7cd5358864f">first</a>) {</div>
<div class="line"><span class="lineno">  704</span>        <a class="code hl_function" href="a00013.html#gaeec15966f023ad1b939a703a22a8a340">_errmsg_write</a>( emsg,<span class="stringliteral">&quot;first&quot;</span>);</div>
<div class="line"><span class="lineno">  705</span>        exit(EXIT_FAILURE);</div>
<div class="line"><span class="lineno">  706</span> </div>
<div class="line"><span class="lineno">  707</span>    }</div>
<div class="line"><span class="lineno">  708</span>    <a class="code hl_variable" href="a00015.html#ga1df927675e1c3b3474a43682105fe225">tot_mem_usage</a> += memory_consumption ;</div>
<div class="line"><span class="lineno">  709</span> </div>
<div class="line"><span class="lineno">  710</span>    memory_consumption = <a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a> * <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="a00012.html#gaa3c04ba804275765a4e49c9872d46a25">Arena</a>) ;</div>
<div class="line"><span class="lineno">  711</span>    <a class="code hl_define" href="a00018.html#ga2299867db75ae79b287efc786896a9d9">CHECK_MEM_AVAIL</a>(memory_consumption,<a class="code hl_variable" href="a00012.html#gad22309eea01f316e361e4cdbb0b6a964">arenas</a>);</div>
<div class="line"><span class="lineno">  712</span>    <a class="code hl_variable" href="a00012.html#gad22309eea01f316e361e4cdbb0b6a964">arenas</a>  = calloc(<a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a>, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="a00024.html">Arena</a>*)) ;</div>
<div class="line"><span class="lineno">  713</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="a00012.html#gad22309eea01f316e361e4cdbb0b6a964">arenas</a>) {</div>
<div class="line"><span class="lineno">  714</span>        <a class="code hl_function" href="a00013.html#gaeec15966f023ad1b939a703a22a8a340">_errmsg_write</a>( emsg,<span class="stringliteral">&quot;arenas&quot;</span>);</div>
<div class="line"><span class="lineno">  715</span>        exit(EXIT_FAILURE);</div>
<div class="line"><span class="lineno">  716</span>    }</div>
<div class="line"><span class="lineno">  717</span>    <a class="code hl_variable" href="a00015.html#ga1df927675e1c3b3474a43682105fe225">tot_mem_usage</a> += memory_consumption ;</div>
<div class="line"><span class="lineno">  718</span>    memory_consumption= <a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a> * <span class="keyword">sizeof</span>(size_t ) ;</div>
<div class="line"><span class="lineno">  719</span>    <a class="code hl_define" href="a00018.html#ga2299867db75ae79b287efc786896a9d9">CHECK_MEM_AVAIL</a>(memory_consumption,<a class="code hl_variable" href="a00012.html#ga5b8552dc29e851b6bdf32f9bad9b0f14">arena_chunk_sz</a>);</div>
<div class="line"><span class="lineno">  720</span>    <a class="code hl_variable" href="a00012.html#ga5b8552dc29e851b6bdf32f9bad9b0f14">arena_chunk_sz</a>  = calloc(<a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">size_t</span>)) ;</div>
<div class="line"><span class="lineno">  721</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="a00012.html#ga5b8552dc29e851b6bdf32f9bad9b0f14">arena_chunk_sz</a>) {</div>
<div class="line"><span class="lineno">  722</span>        <a class="code hl_function" href="a00013.html#gaeec15966f023ad1b939a703a22a8a340">_errmsg_write</a>( emsg,<span class="stringliteral">&quot;arena_chunk_sz&quot;</span>);</div>
<div class="line"><span class="lineno">  723</span>        exit(EXIT_FAILURE);</div>
<div class="line"><span class="lineno">  724</span>    }</div>
<div class="line"><span class="lineno">  725</span>    <a class="code hl_variable" href="a00015.html#ga1df927675e1c3b3474a43682105fe225">tot_mem_usage</a> += memory_consumption ;</div>
<div class="line"><span class="lineno">  726</span> </div>
<div class="line"><span class="lineno">  727</span><span class="preprocessor">#ifndef CORE_ARENA_NO_LOGGING</span></div>
<div class="line"><span class="lineno">  728</span>    <a class="code hl_variable" href="a00015.html#gab1eaae997e785328330ae4bbf7cf3d0f">core_arena_log_level</a> = <a class="code hl_function" href="a00015.html#gafdc8f5b976f6f70c57bca2badb79ffd0">get_log_level</a>() ;</div>
<div class="line"><span class="lineno">  729</span> </div>
<div class="line"><span class="lineno">  730</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="a00015.html#gab1eaae997e785328330ae4bbf7cf3d0f">core_arena_log_level</a> &gt;= <a class="code hl_define" href="a00015.html#ga55710d867b81d742af6057b89017ba7b">LOG_CHUNK_MALLOCS</a>  ) {</div>
<div class="line"><span class="lineno">  731</span>        memory_consumption = <a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a> * <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga7f0e6ee371f41cbb641b2a74ffcc799e">arenas_mem_malloced</a> ;</div>
<div class="line"><span class="lineno">  732</span> </div>
<div class="line"><span class="lineno">  733</span>        <a class="code hl_define" href="a00018.html#ga2299867db75ae79b287efc786896a9d9">CHECK_MEM_AVAIL</a>(memory_consumption,<a class="code hl_variable" href="a00015.html#ga7f0e6ee371f41cbb641b2a74ffcc799e">arenas_mem_malloced</a>);</div>
<div class="line"><span class="lineno">  734</span>        <a class="code hl_variable" href="a00015.html#ga7f0e6ee371f41cbb641b2a74ffcc799e">arenas_mem_malloced</a> = calloc(<a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a>, <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga7f0e6ee371f41cbb641b2a74ffcc799e">arenas_mem_malloced</a> );</div>
<div class="line"><span class="lineno">  735</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="a00015.html#ga7f0e6ee371f41cbb641b2a74ffcc799e">arenas_mem_malloced</a>) {</div>
<div class="line"><span class="lineno">  736</span>            <a class="code hl_function" href="a00013.html#gaeec15966f023ad1b939a703a22a8a340">_errmsg_write</a>( emsg,<span class="stringliteral">&quot;arenas_mem_malloced&quot;</span>);</div>
<div class="line"><span class="lineno">  737</span>            exit(EXIT_FAILURE);</div>
<div class="line"><span class="lineno">  738</span>        }</div>
<div class="line"><span class="lineno">  739</span>        <a class="code hl_variable" href="a00015.html#ga1df927675e1c3b3474a43682105fe225">tot_mem_usage</a> += memory_consumption ;</div>
<div class="line"><span class="lineno">  740</span> </div>
<div class="line"><span class="lineno">  741</span>        memory_consumption = <a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a> * <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga43a17f892ca9f175f4534e44ebc76fc1">arenas_mem_malloced_count</a> ;</div>
<div class="line"><span class="lineno">  742</span> </div>
<div class="line"><span class="lineno">  743</span>        <a class="code hl_define" href="a00018.html#ga2299867db75ae79b287efc786896a9d9">CHECK_MEM_AVAIL</a>(memory_consumption,<a class="code hl_variable" href="a00015.html#ga43a17f892ca9f175f4534e44ebc76fc1">arenas_mem_malloced_count</a>) ;</div>
<div class="line"><span class="lineno">  744</span>        <a class="code hl_variable" href="a00015.html#ga43a17f892ca9f175f4534e44ebc76fc1">arenas_mem_malloced_count</a> = calloc(<a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a>, <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga43a17f892ca9f175f4534e44ebc76fc1">arenas_mem_malloced_count</a> );</div>
<div class="line"><span class="lineno">  745</span>        <a class="code hl_variable" href="a00015.html#ga1df927675e1c3b3474a43682105fe225">tot_mem_usage</a> += memory_consumption ;</div>
<div class="line"><span class="lineno">  746</span> </div>
<div class="line"><span class="lineno">  747</span>        memory_consumption = <a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a> * <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga28ecc87bc4223b8f9c40e9bd2cf7ed32">arenas_mem_mmapped</a> ;</div>
<div class="line"><span class="lineno">  748</span> </div>
<div class="line"><span class="lineno">  749</span>        <a class="code hl_define" href="a00018.html#ga2299867db75ae79b287efc786896a9d9">CHECK_MEM_AVAIL</a>(memory_consumption,<a class="code hl_variable" href="a00015.html#ga28ecc87bc4223b8f9c40e9bd2cf7ed32">arenas_mem_mmapped</a>) ;</div>
<div class="line"><span class="lineno">  750</span>        <a class="code hl_variable" href="a00015.html#ga28ecc87bc4223b8f9c40e9bd2cf7ed32">arenas_mem_mmapped</a> = calloc(<a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a>, <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga28ecc87bc4223b8f9c40e9bd2cf7ed32">arenas_mem_mmapped</a> );</div>
<div class="line"><span class="lineno">  751</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="a00015.html#ga28ecc87bc4223b8f9c40e9bd2cf7ed32">arenas_mem_mmapped</a>) {</div>
<div class="line"><span class="lineno">  752</span>            <a class="code hl_function" href="a00013.html#gaeec15966f023ad1b939a703a22a8a340">_errmsg_write</a>( emsg,<span class="stringliteral">&quot;arenas_mem_mmapped&quot;</span>);</div>
<div class="line"><span class="lineno">  753</span>            exit(EXIT_FAILURE);</div>
<div class="line"><span class="lineno">  754</span>        }</div>
<div class="line"><span class="lineno">  755</span>        <a class="code hl_variable" href="a00015.html#ga1df927675e1c3b3474a43682105fe225">tot_mem_usage</a> += memory_consumption ;</div>
<div class="line"><span class="lineno">  756</span> </div>
<div class="line"><span class="lineno">  757</span>        memory_consumption = <a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a> * <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga39626941a835902709e5be48ab078b87">arenas_mem_mmapped_count</a> ;</div>
<div class="line"><span class="lineno">  758</span>        <a class="code hl_define" href="a00018.html#ga2299867db75ae79b287efc786896a9d9">CHECK_MEM_AVAIL</a>(memory_consumption,<a class="code hl_variable" href="a00015.html#ga39626941a835902709e5be48ab078b87">arenas_mem_mmapped_count</a>) ;</div>
<div class="line"><span class="lineno">  759</span>        <a class="code hl_variable" href="a00015.html#ga39626941a835902709e5be48ab078b87">arenas_mem_mmapped_count</a> = calloc(<a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a>, <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga39626941a835902709e5be48ab078b87">arenas_mem_mmapped_count</a> );</div>
<div class="line"><span class="lineno">  760</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="a00015.html#ga28ecc87bc4223b8f9c40e9bd2cf7ed32">arenas_mem_mmapped</a>) {</div>
<div class="line"><span class="lineno">  761</span>            <a class="code hl_function" href="a00013.html#gaeec15966f023ad1b939a703a22a8a340">_errmsg_write</a>( emsg,<span class="stringliteral">&quot;arenas_mem_mmapped_count&quot;</span>);</div>
<div class="line"><span class="lineno">  762</span>            exit(EXIT_FAILURE);</div>
<div class="line"><span class="lineno">  763</span>        }</div>
<div class="line"><span class="lineno">  764</span>        <a class="code hl_variable" href="a00015.html#ga1df927675e1c3b3474a43682105fe225">tot_mem_usage</a> += memory_consumption ;</div>
<div class="line"><span class="lineno">  765</span> </div>
<div class="line"><span class="lineno">  766</span>        memory_consumption = <a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a> * <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga9fd032f6aaa6a58f211f912303012499">arenas_max_chunk_size</a> ;</div>
<div class="line"><span class="lineno">  767</span>        <a class="code hl_define" href="a00018.html#ga2299867db75ae79b287efc786896a9d9">CHECK_MEM_AVAIL</a>(memory_consumption,<a class="code hl_variable" href="a00015.html#ga9fd032f6aaa6a58f211f912303012499">arenas_max_chunk_size</a>) ;</div>
<div class="line"><span class="lineno">  768</span>        <a class="code hl_variable" href="a00015.html#ga9fd032f6aaa6a58f211f912303012499">arenas_max_chunk_size</a> = calloc(<a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a>, <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga9fd032f6aaa6a58f211f912303012499">arenas_max_chunk_size</a> );</div>
<div class="line"><span class="lineno">  769</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="a00015.html#ga28ecc87bc4223b8f9c40e9bd2cf7ed32">arenas_mem_mmapped</a>) {</div>
<div class="line"><span class="lineno">  770</span>            <a class="code hl_function" href="a00013.html#gaeec15966f023ad1b939a703a22a8a340">_errmsg_write</a>( emsg,<span class="stringliteral">&quot;arenas_max_chunk_size&quot;</span>);</div>
<div class="line"><span class="lineno">  771</span>            exit(EXIT_FAILURE);</div>
<div class="line"><span class="lineno">  772</span>        }</div>
<div class="line"><span class="lineno">  773</span>        <a class="code hl_variable" href="a00015.html#ga1df927675e1c3b3474a43682105fe225">tot_mem_usage</a> += memory_consumption ;</div>
<div class="line"><span class="lineno">  774</span>    }</div>
<div class="line"><span class="lineno">  775</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="a00015.html#gab1eaae997e785328330ae4bbf7cf3d0f">core_arena_log_level</a> &gt;= <a class="code hl_define" href="a00015.html#ga1916d6f5e5c7448b09095b19899b482c">FULL_ARENA_LOGGING</a>  ) {</div>
<div class="line"><span class="lineno">  776</span> </div>
<div class="line"><span class="lineno">  777</span>        memory_consumption = <a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a> * <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga49ca11b978773e49b190c6f977122988">arenas_mem_served</a> ;</div>
<div class="line"><span class="lineno">  778</span>        <a class="code hl_define" href="a00018.html#ga2299867db75ae79b287efc786896a9d9">CHECK_MEM_AVAIL</a>(memory_consumption,<a class="code hl_variable" href="a00015.html#ga49ca11b978773e49b190c6f977122988">arenas_mem_served</a>) ;</div>
<div class="line"><span class="lineno">  779</span>        <a class="code hl_variable" href="a00015.html#ga49ca11b978773e49b190c6f977122988">arenas_mem_served</a> = calloc(<a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a>, <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga49ca11b978773e49b190c6f977122988">arenas_mem_served</a> );</div>
<div class="line"><span class="lineno">  780</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="a00015.html#ga49ca11b978773e49b190c6f977122988">arenas_mem_served</a>) {</div>
<div class="line"><span class="lineno">  781</span>            <a class="code hl_function" href="a00013.html#gaeec15966f023ad1b939a703a22a8a340">_errmsg_write</a>( emsg,<span class="stringliteral">&quot;arenas_mem_served&quot;</span>);</div>
<div class="line"><span class="lineno">  782</span>            exit(EXIT_FAILURE);</div>
<div class="line"><span class="lineno">  783</span>        }</div>
<div class="line"><span class="lineno">  784</span>        <a class="code hl_variable" href="a00015.html#ga1df927675e1c3b3474a43682105fe225">tot_mem_usage</a> += memory_consumption ;</div>
<div class="line"><span class="lineno">  785</span> </div>
<div class="line"><span class="lineno">  786</span>        memory_consumption = <a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a> * <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga5acb1eb15a723f350bda9bb29734b186">arenas_mem_served_count</a> ;</div>
<div class="line"><span class="lineno">  787</span>        <a class="code hl_define" href="a00018.html#ga2299867db75ae79b287efc786896a9d9">CHECK_MEM_AVAIL</a>(memory_consumption,<a class="code hl_variable" href="a00015.html#ga5acb1eb15a723f350bda9bb29734b186">arenas_mem_served_count</a>) ;</div>
<div class="line"><span class="lineno">  788</span>        <a class="code hl_variable" href="a00015.html#ga5acb1eb15a723f350bda9bb29734b186">arenas_mem_served_count</a> = calloc(<a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a>, <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga5acb1eb15a723f350bda9bb29734b186">arenas_mem_served_count</a> );</div>
<div class="line"><span class="lineno">  789</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="a00015.html#ga5acb1eb15a723f350bda9bb29734b186">arenas_mem_served_count</a>) {</div>
<div class="line"><span class="lineno">  790</span>            <a class="code hl_function" href="a00013.html#gaeec15966f023ad1b939a703a22a8a340">_errmsg_write</a>( emsg,<span class="stringliteral">&quot;arenas_mem_served_count&quot;</span>);</div>
<div class="line"><span class="lineno">  791</span>            exit(EXIT_FAILURE);</div>
<div class="line"><span class="lineno">  792</span>        }</div>
<div class="line"><span class="lineno">  793</span>        <a class="code hl_variable" href="a00015.html#ga1df927675e1c3b3474a43682105fe225">tot_mem_usage</a> += memory_consumption ;</div>
<div class="line"><span class="lineno">  794</span> </div>
<div class="line"><span class="lineno">  795</span>        memory_consumption = <a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a> * <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#gad9e78bad28be8f331191b4603736f033">arenas_max_mem_request</a> ;</div>
<div class="line"><span class="lineno">  796</span>        <a class="code hl_define" href="a00018.html#ga2299867db75ae79b287efc786896a9d9">CHECK_MEM_AVAIL</a>(memory_consumption,<a class="code hl_variable" href="a00015.html#gad9e78bad28be8f331191b4603736f033">arenas_max_mem_request</a>) ;</div>
<div class="line"><span class="lineno">  797</span>        <a class="code hl_variable" href="a00015.html#gad9e78bad28be8f331191b4603736f033">arenas_max_mem_request</a> = calloc(<a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a>, <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#gad9e78bad28be8f331191b4603736f033">arenas_max_mem_request</a> );</div>
<div class="line"><span class="lineno">  798</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="a00015.html#gad9e78bad28be8f331191b4603736f033">arenas_max_mem_request</a>) {</div>
<div class="line"><span class="lineno">  799</span>            <a class="code hl_function" href="a00013.html#gaeec15966f023ad1b939a703a22a8a340">_errmsg_write</a>( emsg,<span class="stringliteral">&quot;arenas_max_mem_request&quot;</span>);</div>
<div class="line"><span class="lineno">  800</span>            exit(EXIT_FAILURE);</div>
<div class="line"><span class="lineno">  801</span>        }</div>
<div class="line"><span class="lineno">  802</span>        <a class="code hl_variable" href="a00015.html#ga1df927675e1c3b3474a43682105fe225">tot_mem_usage</a> += memory_consumption ;</div>
<div class="line"><span class="lineno">  803</span> </div>
<div class="line"><span class="lineno">  804</span>        memory_consumption = <a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a> * <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga217368e99341605e4ee440c4c7793204">arenas_min_mem_request</a> ;</div>
<div class="line"><span class="lineno">  805</span>        <a class="code hl_define" href="a00018.html#ga2299867db75ae79b287efc786896a9d9">CHECK_MEM_AVAIL</a>(memory_consumption,<a class="code hl_variable" href="a00015.html#ga217368e99341605e4ee440c4c7793204">arenas_min_mem_request</a>) ;</div>
<div class="line"><span class="lineno">  806</span>        <a class="code hl_variable" href="a00015.html#ga217368e99341605e4ee440c4c7793204">arenas_min_mem_request</a> = calloc(<a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a>, <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga217368e99341605e4ee440c4c7793204">arenas_min_mem_request</a> );</div>
<div class="line"><span class="lineno">  807</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="a00015.html#ga217368e99341605e4ee440c4c7793204">arenas_min_mem_request</a>) {</div>
<div class="line"><span class="lineno">  808</span>            <a class="code hl_function" href="a00013.html#gaeec15966f023ad1b939a703a22a8a340">_errmsg_write</a>( emsg,<span class="stringliteral">&quot;arenas_min_mem_request&quot;</span>);</div>
<div class="line"><span class="lineno">  809</span>            exit(EXIT_FAILURE);</div>
<div class="line"><span class="lineno">  810</span>        }</div>
<div class="line"><span class="lineno">  811</span>        <a class="code hl_variable" href="a00015.html#ga1df927675e1c3b3474a43682105fe225">tot_mem_usage</a> += memory_consumption ;</div>
<div class="line"><span class="lineno">  812</span> </div>
<div class="line"><span class="lineno">  813</span>        memory_consumption = <a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a> * <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga93bdbec87512dff3ba3a0c59de956149">arenas_avg_mem_request</a> ;</div>
<div class="line"><span class="lineno">  814</span>        <a class="code hl_define" href="a00018.html#ga2299867db75ae79b287efc786896a9d9">CHECK_MEM_AVAIL</a>(memory_consumption,<a class="code hl_variable" href="a00015.html#ga93bdbec87512dff3ba3a0c59de956149">arenas_avg_mem_request</a>) ;</div>
<div class="line"><span class="lineno">  815</span>        <a class="code hl_variable" href="a00015.html#ga93bdbec87512dff3ba3a0c59de956149">arenas_avg_mem_request</a> = calloc(<a class="code hl_variable" href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a>, <span class="keyword">sizeof</span> *<a class="code hl_variable" href="a00015.html#ga93bdbec87512dff3ba3a0c59de956149">arenas_avg_mem_request</a> );</div>
<div class="line"><span class="lineno">  816</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="a00015.html#ga93bdbec87512dff3ba3a0c59de956149">arenas_avg_mem_request</a>) {</div>
<div class="line"><span class="lineno">  817</span>            <a class="code hl_function" href="a00013.html#gaeec15966f023ad1b939a703a22a8a340">_errmsg_write</a>( emsg,<span class="stringliteral">&quot;arenas_avg_mem_request&quot;</span>);</div>
<div class="line"><span class="lineno">  818</span>            exit(EXIT_FAILURE);</div>
<div class="line"><span class="lineno">  819</span>        }</div>
<div class="line"><span class="lineno">  820</span>        <a class="code hl_variable" href="a00015.html#ga1df927675e1c3b3474a43682105fe225">tot_mem_usage</a> += memory_consumption ;</div>
<div class="line"><span class="lineno">  821</span>    }</div>
<div class="line"><span class="lineno">  822</span><span class="preprocessor">#endif </span></div>
<div class="line"><span class="lineno">  823</span> </div>
<div class="line"><span class="lineno">  824</span>    <span class="keywordflow">if</span> (atexit(<a class="code hl_function" href="a00018.html#ga4803d2838f1455d7dd2973b3cb4885c7">_arena_teardown</a>)&lt; 0) {</div>
<div class="line"><span class="lineno">  825</span>        <a class="code hl_function" href="a00013.html#gaeec15966f023ad1b939a703a22a8a340">_errmsg_write</a>(<span class="stringliteral">&quot;arena_init_arenas: failed to install _arena_teardown down handler. Exiting.%s&quot;</span>,<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><span class="lineno">  826</span>        exit(EXIT_FAILURE);;</div>
<div class="line"><span class="lineno">  828</span>    }</div>
<div class="line"><span class="lineno">  829</span>    <a class="code hl_variable" href="a00018.html#gae1ce763e170ef4f371f9ae5fd34ce4c2">arenas_initialized</a> = true ;</div>
<div class="line"><span class="lineno">  830</span>}</div>
<div class="ttc" id="aa00008_html_a74373ca3f02daec67e250b363a71bdf1"><div class="ttname"><a href="a00008.html#a74373ca3f02daec67e250b363a71bdf1">ram_avail</a></div><div class="ttdeci">static size_t ram_avail(void)</div><div class="ttdoc">Returns the physically available ram.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00203">core_arena.c:203</a></div></div>
<div class="ttc" id="aa00012_html_ga5b8552dc29e851b6bdf32f9bad9b0f14"><div class="ttname"><a href="a00012.html#ga5b8552dc29e851b6bdf32f9bad9b0f14">arena_chunk_sz</a></div><div class="ttdeci">static size_t * arena_chunk_sz</div><div class="ttdoc">Standard chunk size for arena.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00050">core_arena.c:50</a></div></div>
<div class="ttc" id="aa00012_html_ga8d62b92f0d6f3b3bfa172b8ff05cdc8e"><div class="ttname"><a href="a00012.html#ga8d62b92f0d6f3b3bfa172b8ff05cdc8e">ARENAS_MAX</a></div><div class="ttdeci">static uint32_t ARENAS_MAX</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00047">core_arena.c:47</a></div></div>
<div class="ttc" id="aa00012_html_gaa3c04ba804275765a4e49c9872d46a25"><div class="ttname"><a href="a00012.html#gaa3c04ba804275765a4e49c9872d46a25">Arena</a></div><div class="ttdeci">struct arena Arena</div><div class="ttdoc">Typedef of struct arena.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00035">core_arena.c:35</a></div></div>
<div class="ttc" id="aa00013_html_gaeec15966f023ad1b939a703a22a8a340"><div class="ttname"><a href="a00013.html#gaeec15966f023ad1b939a703a22a8a340">_errmsg_write</a></div><div class="ttdeci">static void _errmsg_write(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00127">core_arena.c:127</a></div></div>
<div class="ttc" id="aa00015_html_gafdc8f5b976f6f70c57bca2badb79ffd0"><div class="ttname"><a href="a00015.html#gafdc8f5b976f6f70c57bca2badb79ffd0">get_log_level</a></div><div class="ttdeci">int16_t get_log_level(void)</div><div class="ttdoc">‍for logging average memory request for each arena</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00301">core_arena.c:301</a></div></div>
<div class="ttc" id="aa00018_html_ga2299867db75ae79b287efc786896a9d9"><div class="ttname"><a href="a00018.html#ga2299867db75ae79b287efc786896a9d9">CHECK_MEM_AVAIL</a></div><div class="ttdeci">#define CHECK_MEM_AVAIL(mem_need, mem_object)</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00670">core_arena.c:670</a></div></div>
<div class="ttc" id="aa00018_html_ga4803d2838f1455d7dd2973b3cb4885c7"><div class="ttname"><a href="a00018.html#ga4803d2838f1455d7dd2973b3cb4885c7">_arena_teardown</a></div><div class="ttdeci">static void _arena_teardown(void)</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00645">core_arena.c:645</a></div></div>
<div class="ttc" id="aa00018_html_gae1ce763e170ef4f371f9ae5fd34ce4c2"><div class="ttname"><a href="a00018.html#gae1ce763e170ef4f371f9ae5fd34ce4c2">arenas_initialized</a></div><div class="ttdeci">static bool arenas_initialized</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00643">core_arena.c:643</a></div></div>
<div class="ttc" id="aa00024_html"><div class="ttname"><a href="a00024.html">arena</a></div><div class="ttdoc">Our struct for book keeping of the arena and its storage .</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00037">core_arena.c:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="a00008_source.html#l00645">_arena_teardown()</a>, <a class="el" href="a00008_source.html#l00127">_errmsg_write()</a>, <a class="el" href="a00008_source.html#l00050">arena_chunk_sz</a>, <a class="el" href="a00008_source.html#l00049">arenas</a>, <a class="el" href="a00008_source.html#l00291">arenas_avg_mem_request</a>, <a class="el" href="a00008_source.html#l00643">arenas_initialized</a>, <a class="el" href="a00008_source.html#l00047">ARENAS_MAX</a>, <a class="el" href="a00008_source.html#l00183">ARENAS_MAX_ALLOC</a>, <a class="el" href="a00008_source.html#l00287">arenas_max_chunk_size</a>, <a class="el" href="a00008_source.html#l00289">arenas_max_mem_request</a>, <a class="el" href="a00008_source.html#l00280">arenas_mem_malloced</a>, <a class="el" href="a00008_source.html#l00281">arenas_mem_malloced_count</a>, <a class="el" href="a00008_source.html#l00282">arenas_mem_mmapped</a>, <a class="el" href="a00008_source.html#l00283">arenas_mem_mmapped_count</a>, <a class="el" href="a00008_source.html#l00284">arenas_mem_served</a>, <a class="el" href="a00008_source.html#l00285">arenas_mem_served_count</a>, <a class="el" href="a00008_source.html#l00290">arenas_min_mem_request</a>, <a class="el" href="a00008_source.html#l00670">CHECK_MEM_AVAIL</a>, <a class="el" href="a00008_source.html#l00262">core_arena_log_level</a>, <a class="el" href="a00008_source.html#l00048">first</a>, <a class="el" href="a00008_source.html#l00259">FULL_ARENA_LOGGING</a>, <a class="el" href="a00008_source.html#l00301">get_log_level()</a>, <a class="el" href="a00008_source.html#l00258">LOG_CHUNK_MALLOCS</a>, <a class="el" href="a00008_source.html#l00203">ram_avail()</a>, and <a class="el" href="a00008_source.html#l00279">tot_mem_usage</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="gae1ce763e170ef4f371f9ae5fd34ce4c2" name="gae1ce763e170ef4f371f9ae5fd34ce4c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae1ce763e170ef4f371f9ae5fd34ce4c2">&#9670;&nbsp;</a></span>arenas_initialized</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool arenas_initialized =false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00008_source.html#l00643">643</a> of file <a class="el" href="a00008_source.html">core_arena.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00008_source.html#l00847">arena_alloc()</a>, <a class="el" href="a00008_source.html#l00928">arena_calloc()</a>, <a class="el" href="a00008_source.html#l01007">arena_create()</a>, <a class="el" href="a00008_source.html#l00976">arena_dealloc()</a>, <a class="el" href="a00008_source.html#l01056">arena_destroy()</a>, and <a class="el" href="a00008_source.html#l00689">arena_init_arenas()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Feb 26 2024 17:02:45 for core_arena by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
