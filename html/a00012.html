<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>core_arena: Simple logging system.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">core_arena
   &#160;<span id="projectnumber">v0.0.1</span>
   </div>
   <div id="projectbrief">An arena allocater that uses core memory aside malloc.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Simple logging system.</div>  </div>
</div><!--header-->
<div class="contents">

<p>A small logging system that reports memory usage by the arenas at program exit.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gab561f26e19b2d5c4428c1ae99442f74e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00012.html#gab561f26e19b2d5c4428c1ae99442f74e">NO_ARENA_LOGGING</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:gab561f26e19b2d5c4428c1ae99442f74e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constant for no logging.  <a href="a00012.html#gab561f26e19b2d5c4428c1ae99442f74e">More...</a><br /></td></tr>
<tr class="separator:gab561f26e19b2d5c4428c1ae99442f74e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga55710d867b81d742af6057b89017ba7b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00012.html#ga55710d867b81d742af6057b89017ba7b">LOG_CHUNK_MALLOCS</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga55710d867b81d742af6057b89017ba7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constant for logging allocations of memory for the arenas.  <a href="a00012.html#ga55710d867b81d742af6057b89017ba7b">More...</a><br /></td></tr>
<tr class="separator:ga55710d867b81d742af6057b89017ba7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1916d6f5e5c7448b09095b19899b482c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00012.html#ga1916d6f5e5c7448b09095b19899b482c">FULL_ARENA_LOGGING</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:ga1916d6f5e5c7448b09095b19899b482c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constant for logging bothh allocations of memory <em>for</em> the arenas, and the allocations of memory <em>from</em> the arenas.  <a href="a00012.html#ga1916d6f5e5c7448b09095b19899b482c">More...</a><br /></td></tr>
<tr class="separator:ga1916d6f5e5c7448b09095b19899b482c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6d01238a144ad33406ade8b5c2935105"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00012.html#ga6d01238a144ad33406ade8b5c2935105">ARENAS_LOG_LEVEL</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ga6d01238a144ad33406ade8b5c2935105"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gacb4c45a8b06492753c41014f447033a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00012.html#gacb4c45a8b06492753c41014f447033a7">report_memory_usage</a> (void)</td></tr>
<tr class="memdesc:gacb4c45a8b06492753c41014f447033a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reports memory usage, installed by atexit().  <a href="a00012.html#gacb4c45a8b06492753c41014f447033a7">More...</a><br /></td></tr>
<tr class="separator:gacb4c45a8b06492753c41014f447033a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gab0b000acde5fb04d183e03119697afd7"><td class="memItemLeft" align="right" valign="top">static unsigned long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00012.html#gab0b000acde5fb04d183e03119697afd7">allocated_chunks</a> [<a class="el" href="a00008.html#a87cc5fd59a28dced587d8bfa5bee3a13">ARENAS_MAX</a>]</td></tr>
<tr class="separator:gab0b000acde5fb04d183e03119697afd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0955ebdd26c5cc641ea6032006b9182d"><td class="memItemLeft" align="right" valign="top">static unsigned long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00012.html#ga0955ebdd26c5cc641ea6032006b9182d">allocation_chunk_count</a> [<a class="el" href="a00008.html#a87cc5fd59a28dced587d8bfa5bee3a13">ARENAS_MAX</a>]</td></tr>
<tr class="separator:ga0955ebdd26c5cc641ea6032006b9182d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>A small logging system that reports memory usage by the arenas at program exit. </p>
<p>We support logging, so you can deduce the memory usage, the logging is only intended for testing, and not to be left on in production code. The logging report is bypassed if you exit your program with <code>_Exit</code> or a <code>TERM</code> signal, as the report_usage is installed by <code>atexit()</code>. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga6d01238a144ad33406ade8b5c2935105"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6d01238a144ad33406ade8b5c2935105">&#9670;&nbsp;</a></span>ARENAS_LOG_LEVEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ARENAS_LOG_LEVEL&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00005_source.html#l00158">158</a> of file <a class="el" href="a00005_source.html">core_arena.c</a>.</p>

</div>
</div>
<a id="ga1916d6f5e5c7448b09095b19899b482c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1916d6f5e5c7448b09095b19899b482c">&#9670;&nbsp;</a></span>FULL_ARENA_LOGGING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FULL_ARENA_LOGGING&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constant for logging bothh allocations of memory <em>for</em> the arenas, and the allocations of memory <em>from</em> the arenas. </p>

<p class="definition">Definition at line <a class="el" href="a00005_source.html#l00156">156</a> of file <a class="el" href="a00005_source.html">core_arena.c</a>.</p>

</div>
</div>
<a id="ga55710d867b81d742af6057b89017ba7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga55710d867b81d742af6057b89017ba7b">&#9670;&nbsp;</a></span>LOG_CHUNK_MALLOCS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_CHUNK_MALLOCS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constant for logging allocations of memory for the arenas. </p>

<p class="definition">Definition at line <a class="el" href="a00005_source.html#l00153">153</a> of file <a class="el" href="a00005_source.html">core_arena.c</a>.</p>

</div>
</div>
<a id="gab561f26e19b2d5c4428c1ae99442f74e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab561f26e19b2d5c4428c1ae99442f74e">&#9670;&nbsp;</a></span>NO_ARENA_LOGGING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NO_ARENA_LOGGING&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constant for no logging. </p>

<p class="definition">Definition at line <a class="el" href="a00005_source.html#l00151">151</a> of file <a class="el" href="a00005_source.html">core_arena.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gacb4c45a8b06492753c41014f447033a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacb4c45a8b06492753c41014f447033a7">&#9670;&nbsp;</a></span>report_memory_usage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void report_memory_usage </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reports memory usage, installed by atexit(). </p>

<p class="definition">Definition at line <a class="el" href="a00005_source.html#l00178">178</a> of file <a class="el" href="a00005_source.html">core_arena.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;{</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor">#if ARENAS_LOG_LEVEL ==  0</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    ;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">#elif ARENAS_LOG_LEVEL ==  1</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    fprintf( stderr, <span class="stringliteral">&quot;\nReport of arena memory usage:\n&quot;</span> <span class="stringliteral">&quot;=============================\n&quot;</span> );</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="a00008.html#a87cc5fd59a28dced587d8bfa5bee3a13">ARENAS_MAX</a>; ++i ) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        fprintf( stderr, <span class="stringliteral">&quot;Arena nr %i was granted %llu bytes of memory in %llu allocations.\n&quot;</span>,</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                 i, <a class="code" href="a00012.html#gab0b000acde5fb04d183e03119697afd7">allocated_chunks</a>[i], <a class="code" href="a00012.html#ga0955ebdd26c5cc641ea6032006b9182d">allocation_chunk_count</a>[i] );</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="preprocessor">#elif ARENAS_LOG_LEVEL == 2</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    fprintf( stderr, <span class="stringliteral">&quot;\nReport of arena memory usage:\n&quot;</span> <span class="stringliteral">&quot;=============================\n&quot;</span> );</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="a00008.html#a87cc5fd59a28dced587d8bfa5bee3a13">ARENAS_MAX</a>; ++i ) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        fprintf( stderr, <span class="stringliteral">&quot;Arena nr %i was granted %llu bytes of memory in %llu allocations.\n&quot;</span>,</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                 i, <a class="code" href="a00012.html#gab0b000acde5fb04d183e03119697afd7">allocated_chunks</a>[i], <a class="code" href="a00012.html#ga0955ebdd26c5cc641ea6032006b9182d">allocation_chunk_count</a>[i] );</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        fprintf( stderr, <span class="stringliteral">&quot;Arena nr %i  gave away  %llu bytes of memory in %llu serves.\n&quot;</span>,</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                 i, allocated_memory[i], allocation_memory_count[i] );</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div>
<div class="ttc" id="aa00008_html_a87cc5fd59a28dced587d8bfa5bee3a13"><div class="ttname"><a href="a00008.html#a87cc5fd59a28dced587d8bfa5bee3a13">ARENAS_MAX</a></div><div class="ttdeci">#define ARENAS_MAX</div><div class="ttdoc">Define the number of arenas you need.</div><div class="ttdef"><b>Definition:</b> <a href="a00008_source.html#l00059">core_arena.h:59</a></div></div>
<div class="ttc" id="aa00012_html_ga0955ebdd26c5cc641ea6032006b9182d"><div class="ttname"><a href="a00012.html#ga0955ebdd26c5cc641ea6032006b9182d">allocation_chunk_count</a></div><div class="ttdeci">static unsigned long long allocation_chunk_count[ARENAS_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="a00005_source.html#l00163">core_arena.c:163</a></div></div>
<div class="ttc" id="aa00012_html_gab0b000acde5fb04d183e03119697afd7"><div class="ttname"><a href="a00012.html#gab0b000acde5fb04d183e03119697afd7">allocated_chunks</a></div><div class="ttdeci">static unsigned long long allocated_chunks[ARENAS_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="a00005_source.html#l00162">core_arena.c:162</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="a00005_source.html#l00162">allocated_chunks</a>, <a class="el" href="a00005_source.html#l00163">allocation_chunk_count</a>, and <a class="el" href="a00008_source.html#l00059">ARENAS_MAX</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00005_source.html#l00508">arena_create()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="gab0b000acde5fb04d183e03119697afd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab0b000acde5fb04d183e03119697afd7">&#9670;&nbsp;</a></span>allocated_chunks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long long allocated_chunks[<a class="el" href="a00008.html#a87cc5fd59a28dced587d8bfa5bee3a13">ARENAS_MAX</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00005_source.html#l00162">162</a> of file <a class="el" href="a00005_source.html">core_arena.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00005_source.html#l00287">_alloc()</a>, <a class="el" href="a00005_source.html#l00508">arena_create()</a>, and <a class="el" href="a00005_source.html#l00178">report_memory_usage()</a>.</p>

</div>
</div>
<a id="ga0955ebdd26c5cc641ea6032006b9182d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0955ebdd26c5cc641ea6032006b9182d">&#9670;&nbsp;</a></span>allocation_chunk_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long long allocation_chunk_count[<a class="el" href="a00008.html#a87cc5fd59a28dced587d8bfa5bee3a13">ARENAS_MAX</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00005_source.html#l00163">163</a> of file <a class="el" href="a00005_source.html">core_arena.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00005_source.html#l00287">_alloc()</a>, <a class="el" href="a00005_source.html#l00508">arena_create()</a>, and <a class="el" href="a00005_source.html#l00178">report_memory_usage()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Dec 30 2023 05:59:42 for core_arena by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
